{"version":3,"file":"src_app_vistas_login_login_module_ts.js","mappings":"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","sources":["./src/app/vistas/login/login-routing.module.ts","./src/app/vistas/login/login.module.ts","./src/app/vistas/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, LoadingController } from '@ionic/angular';\r\nimport {FireserviceService} from 'src/app/fireservice.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n  \r\n  public email:any;\r\n  public password: any;\r\n  public apellido: any;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private loadingCtrl: LoadingController,\r\n    public fireservice:FireserviceService,\r\n    private alertController:AlertController \r\n  ) {}\r\n  \r\n  ngOnInit() {\r\n  }\r\n\r\n // Esta función se ejecuta cuando se presiona el botón de inicio de sesión.\r\n  async login() {\r\n    if (!this.email || !this.password) {\r\n      await this.presentAlert('Por favor, ingresa un correo electrónico y una contraseña.');\r\n      return;\r\n    }\r\n    this.showLoading();\r\n    try {\r\n      const res = await this.fireservice.loginWithEmail({ email: this.email, password: this.password });\r\n      console.log(res);\r\n      if (res.user.uid) {\r\n        this.fireservice.getDetails({ uid: res.user.uid }).subscribe(\r\n          (res) => {\r\n            console.log(res);\r\n            this.loadingCtrl.dismiss();\r\n            this.router.navigate(['/menu-principal']);\r\n          },\r\n          (err) => {\r\n            console.log(err);\r\n          }\r\n        );\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n      // Verifica el tipo de error para mostrar el mensaje adecuado\r\n      if (err.code === 'auth/wrong-password' || err.code === 'auth/user-not-found') {\r\n        await this.presentAlert('Usuario o contraseña incorrectos');\r\n      } else {\r\n        await this.presentAlert('Ocurrió un error al iniciar sesión. Por favor, intenta de nuevo más tarde.');\r\n      }\r\n      this.loadingCtrl.dismiss();\r\n    }\r\n  }\r\n  \r\n  \r\n  // Esta función se ejecuta cuando se presiona el botón de registro.\r\n  // Redirige al usuario a la página de registro.\r\n  signup() {\r\n    this.router.navigate(['/registro']); // Redirige a la página de registro\r\n  }\r\n\r\n  // Esta función muestra un indicador de carga con un mensaje de \"Iniciando Sesión...\".\r\n  async showLoading() {\r\n    const loading = await this.loadingCtrl.create({\r\n      spinner: \"bubbles\",\r\n      message: 'Iniciando Sesion...',\r\n    });\r\n\r\n    loading.present();\r\n  }\r\n\r\n  // Esta función muestra una alerta con un mensaje de error.\r\n  // Se utiliza para mostrar mensajes de error al usuario.\r\n  async presentAlert(message: string) {\r\n    const alert = await this.alertController.create({\r\n      header: 'Mensaje de Error',\r\n      message: message,\r\n      buttons: ['OK'],\r\n    });\r\n  \r\n    await alert.present();\r\n  }\r\n  \r\n}\r\n\r\n\r\n"],"names":["Component","Router","AlertController","LoadingController","FireserviceService","LoginPage","constructor","router","loadingCtrl","fireservice","alertController","ngOnInit","login","email","password","presentAlert","showLoading","res","loginWithEmail","console","log","user","uid","getDetails","subscribe","dismiss","navigate","err","code","signup","loading","create","spinner","message","present","alert","header","buttons","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}