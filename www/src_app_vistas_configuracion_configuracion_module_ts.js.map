{"version":3,"file":"src_app_vistas_configuracion_configuracion_module_ts.js","mappings":"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","sources":["./src/app/vistas/configuracion/configuracion-routing.module.ts","./src/app/vistas/configuracion/configuracion.module.ts","./src/app/vistas/configuracion/configuracion.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ConfiguracionPage } from './configuracion.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ConfiguracionPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ConfiguracionPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ConfiguracionPageRoutingModule } from './configuracion-routing.module';\r\n\r\nimport { ConfiguracionPage } from './configuracion.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ConfiguracionPageRoutingModule\r\n  ],\r\n  declarations: [ConfiguracionPage]\r\n})\r\nexport class ConfiguracionPageModule {}\r\n","import { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { FireserviceService } from 'src/app/servicios/fireservice.service';\r\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\r\nimport { ActionSheetController, AlertController } from '@ionic/angular';\r\nimport { GmapsService } from 'src/app/servicios/gmaps.service';\r\nimport { DataService } from 'src/app/servicios/data.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-configuracion',\r\n  templateUrl: './configuracion.page.html',\r\n  styleUrls: ['./configuracion.page.scss'],\r\n})\r\nexport class ConfiguracionPage implements OnInit, OnDestroy {\r\n  modoNocturno: boolean;\r\n  modoNocturnoSubscription: Subscription;\r\n  userEmail: string;\r\n  userName: string;\r\n  creationTime: string; // Agrega una propiedad para la fecha de creación\r\n  //gmaps: GmapsService;\r\n\r\n  @ViewChild('map', {static: true}) mapElementRef: ElementRef;\r\n  googleMaps: any;\r\n  center = { lat: -33.59792458336969, lng: -70.70543417692222 };\r\n  map: any;\r\n  mapClickListener: any;\r\n  markerClickListener: any;\r\n  markers: any[] = [];\r\n\r\n\r\n  constructor(\r\n    private dataService: DataService,\r\n    public fireservice: FireserviceService,\r\n    private router: Router,\r\n    private afAuth: AngularFireAuth,\r\n    private alertController: AlertController,\r\n    private gmaps: GmapsService,\r\n    private renderer: Renderer2,\r\n    private actionSheetCtrl: ActionSheetController\r\n  ) { }\r\n\r\n  toggleTheme(event: CustomEvent): void {\r\n    this.modoNocturno = event.detail.checked;\r\n    this.dataService.setModoNocturno(this.modoNocturno);\r\n    this.actualizarEstiloBody();\r\n  }\r\n  \r\n  // Función para determinar la clase CSS según el modo nocturno\r\n  getLinkClass(): string {\r\n    return this.modoNocturno ? 'link-nocturno' : 'link-diurno';\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.modoNocturno = this.dataService.getModoNocturno();\r\n    this.actualizarEstiloBody();\r\n\r\n    this.modoNocturnoSubscription = this.dataService.getModoNocturnoObservable().subscribe(\r\n      (modoNocturno) => {\r\n        this.modoNocturno = modoNocturno;\r\n        this.actualizarEstiloBody();\r\n      }\r\n    );\r\n  }\r\n\r\n  private actualizarEstiloBody(): void {\r\n    document.body.setAttribute('color-theme', this.modoNocturno ? 'dark' : 'light');\r\n  }\r\n  \r\n  \r\n\r\n  ngAfterViewInit() {\r\n    this.cargarGMap();\r\n  }\r\n\r\n  // Esta función se ejecuta cuando el usuario desea cerrar sesión.\r\n  // Muestra un cuadro de diálogo de confirmación para asegurarse de que el usuario desea cerrar sesión.\r\n  async logout() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Cerrar Sesión',\r\n      message: '¿Está seguro de que desea cerrar sesión?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancelar',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            // Cancelar la acción\r\n          }\r\n        },\r\n        {\r\n          text: 'Cerrar Sesión',\r\n          handler: async () => {\r\n            try {\r\n              await this.fireservice.signOut();\r\n              this.router.navigate(['/login']);\r\n              this.userEmail = '';\r\n              this.creationTime = '';\r\n            } catch (err) {\r\n              console.error(err);\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    });\r\n  \r\n    await alert.present();\r\n  }\r\n\r\n\r\n  async cargarGMap(){\r\n    try {\r\n      let googleMaps: any = await this.gmaps.loadGoogleMaps();\r\n      this.googleMaps = googleMaps;\r\n      const mapEl = this.mapElementRef.nativeElement;\r\n      const location = new googleMaps.LatLng(this.center.lat, this.center.lng);\r\n      this.map = new googleMaps.Map(mapEl, {\r\n        center: location,\r\n        zoom: 12,\r\n      });\r\n      this.renderer.addClass(mapEl, 'visible');\r\n      this.addMarker(location);\r\n      this.onMapClick();\r\n    } catch(e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  \r\n  onMapClick() {\r\n    this.mapClickListener = this.googleMaps.event.addListener(this.map, \"click\", (mapsMouseEvent) => {\r\n      console.log(mapsMouseEvent.latLng.toJSON());\r\n      this.addMarker(mapsMouseEvent.latLng);\r\n    });\r\n  }\r\n\r\n  addMarker(location) {\r\n    let googleMaps: any = this.googleMaps;\r\n    const icon = {\r\n      url: 'assets/icon/isotipo.png',\r\n      scaledSize: new googleMaps.Size(50, 50), \r\n    };\r\n    const marker = new googleMaps.Marker({\r\n      position: location,\r\n      map: this.map,\r\n      icon: icon,\r\n      // draggable: true,\r\n      animation: googleMaps.Animation.DROP\r\n    });\r\n    this.markers.push(marker);\r\n    // this.presentActionSheet();\r\n    this.markerClickListener = this.googleMaps.event.addListener(marker, 'click', () => {\r\n      console.log('markerclick', marker);\r\n      this.checkAndRemoveMarker(marker);\r\n      console.log('markers: ', this.markers);\r\n    });\r\n  }\r\n\r\n  checkAndRemoveMarker(marker) {\r\n    const index = this.markers.findIndex(x => x.position.lat() == marker.position.lat() && x.position.lng() == marker.position.lng());\r\n    console.log('is marker already: ', index);\r\n    if(index >= 0) {\r\n      this.markers[index].setMap(null);\r\n      this.markers.splice(index, 1);\r\n      return;\r\n    }\r\n  }\r\n\r\n  async presentActionSheet() {\r\n    const actionSheet = await this.actionSheetCtrl.create({\r\n      header: 'Added Marker',\r\n      subHeader: '',\r\n      buttons: [\r\n        {\r\n          text: 'Remove',\r\n          role: 'destructive',\r\n          data: {\r\n            action: 'delete',\r\n          },\r\n        },\r\n        {\r\n          text: 'Save',\r\n          data: {\r\n            action: 'share',\r\n          },\r\n        },\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          data: {\r\n            action: 'cancel',\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await actionSheet.present();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // this.googleMaps.event.removeAllListeners();\r\n    if(this.mapClickListener) this.googleMaps.event.removeListener(this.mapClickListener);\r\n    if(this.markerClickListener) this.googleMaps.event.removeListener(this.markerClickListener);\r\n    this.modoNocturnoSubscription.unsubscribe();\r\n  }\r\n\r\n\r\n  \r\n}"],"names":["Component","Renderer2","ViewChild","Router","FireserviceService","AngularFireAuth","ActionSheetController","AlertController","GmapsService","DataService","ConfiguracionPage","constructor","dataService","fireservice","router","afAuth","alertController","gmaps","renderer","actionSheetCtrl","lat","lng","toggleTheme","event","modoNocturno","detail","checked","setModoNocturno","actualizarEstiloBody","getLinkClass","ngOnInit","getModoNocturno","modoNocturnoSubscription","getModoNocturnoObservable","subscribe","document","body","setAttribute","ngAfterViewInit","cargarGMap","logout","alert","create","header","message","buttons","text","role","handler","signOut","navigate","userEmail","creationTime","err","console","error","present","googleMaps","loadGoogleMaps","mapEl","mapElementRef","nativeElement","location","LatLng","center","map","Map","zoom","addClass","addMarker","onMapClick","e","log","mapClickListener","addListener","mapsMouseEvent","latLng","toJSON","icon","url","scaledSize","Size","marker","Marker","position","animation","Animation","DROP","markers","push","markerClickListener","checkAndRemoveMarker","index","findIndex","x","setMap","splice","presentActionSheet","actionSheet","subHeader","data","action","ngOnDestroy","removeListener","unsubscribe","args","static","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}