{"version":3,"file":"src_app_vistas_scan-qr-pago_scan-qr-pago_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEF;AAErD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,8DAAc;KAC1B;CACF,CAAC;IAMW,2BAA2B,SAA3B,2BAA2B;;AAA3B,2BAA2B;IAJvC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,2BAA2B;AAAA;;;;;;;;;;;;;;;;;;;;;;;AChBC;AACM;AACF;AAEA;AAE+B;AAEvB;IAWxC,oBAAoB,SAApB,oBAAoB;;AAApB,oBAAoB;IAThC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,qFAA2B;SAC5B;QACD,YAAY,EAAE,CAAC,8DAAc,CAAC;KAC/B,CAAC;GACW,oBAAoB;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;ACnBjC;AACA;IAQaE,cAAc,SAAdA,cAAc;EAKzBC;IAJA,oBAAe,gBAAf;IAEA,0BAAqB,EAArB;EAEiB,CALQ,CAO3B;;;EACQC,eAAe;IAAA;MACnB,IAAI;QACF;QACA;QACA,MAAMC,MAAM,SAASJ,gGAAA,CAA+B;UAAEK,KAAK,EAAE;QAAT,CAA/B,CAArB;;QACA,IAAID,MAAM,CAACE,OAAX,EAAoB;UAClB;UACA,OAAO,IAAP;QACD,CAPC,CAQF;;;QACA,OAAO,KAAP;MACD,CAVD,CAUE,OAAMC,CAAN,EAAS;QACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;MACD;IAbkB;EAcpB,CAtBwB,CAuB3B;;;EACQG,SAAS;IAAA;;IAAA;MACb,IAAI;QACF;QACA,MAAMC,UAAU,SAAS,KAAI,CAACR,eAAL,EAAzB;;QACA,IAAG,CAACQ,UAAJ,EAAgB;UACd;QACD,CALC,CAMF;;;QACA,MAAMX,+FAAA,EAAN;QACAa,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,SAA/B,CAAyCC,GAAzC,CAA6C,gBAA7C;QACA,KAAI,CAACC,kBAAL,GAA0B,QAA1B,CATE,CAWF;;QACA,MAAMC,MAAM,SAASlB,0FAAA,EAArB;QACAQ,OAAO,CAACC,GAAR,CAAYS,MAAZ;QACAlB,+FAAA;QACAa,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,SAA/B,CAAyCK,MAAzC,CAAgD,gBAAhD;QACA,KAAI,CAACH,kBAAL,GAA0B,EAA1B;;QACA,IAAGC,MAAM,EAAEG,UAAX,EAAuB;UACrB,KAAI,CAACC,aAAL,GAAqBJ,MAAM,CAACK,OAA5B;UACAf,OAAO,CAACC,GAAR,CAAY,KAAI,CAACa,aAAjB;QACD;MACF,CArBD,CAqBE,OAAMf,CAAN,EAAS;QACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;;QACA,KAAI,CAACiB,QAAL;MACD;IAzBY;EA0Bd,CAlDwB,CAoDzB;;;EACAA,QAAQ;IACNxB,+FAAA;IACAA,yFAAA;IACAa,QAAQ,CAACC,aAAT,CAAuB,MAAvB,EAA+BC,SAA/B,CAAyCK,MAAzC,CAAgD,gBAAhD;IACA,KAAKH,kBAAL,GAA0B,EAA1B;EACD,CA1DwB,CA4D3B;;;EACEQ,WAAW;IACT,KAAKD,QAAL;EACH;;AA/D0B;;;;AAAdvB,cAAc,sDAL1BF,wDAAS,CAAC;EACT2B,QAAQ,EAAE,kBADD;EAETC,UAAAA,+DAFS;;AAAA,CAAD,CAKiB,GAAd1B,cAAc,CAAd","sources":["./src/app/vistas/scan-qr-pago/scan-qr-pago-routing.module.ts","./src/app/vistas/scan-qr-pago/scan-qr-pago.module.ts","./src/app/vistas/scan-qr-pago/scan-qr-pago.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ScanQrPagoPage } from './scan-qr-pago.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ScanQrPagoPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ScanQrPagoPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ScanQrPagoPageRoutingModule } from './scan-qr-pago-routing.module';\r\n\r\nimport { ScanQrPagoPage } from './scan-qr-pago.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ScanQrPagoPageRoutingModule\r\n  ],\r\n  declarations: [ScanQrPagoPage]\r\n})\r\nexport class ScanQrPagoPageModule {}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { BarcodeScanner } from '@capacitor-community/barcode-scanner';\r\n\r\n\r\n@Component({\r\n  selector: 'app-scan-qr-pago',\r\n  templateUrl: './scan-qr-pago.page.html',\r\n  styleUrls: ['./scan-qr-pago.page.scss'],\r\n})\r\nexport class ScanQrPagoPage implements OnDestroy {\r\n  qrCodeString = 'Clave dinámica';\r\n  scannedResult: any;\r\n  content_visibility = '';\r\n\r\n  constructor() { }\r\n\r\n// Esta función verifica si la aplicación tiene permiso para usar el escáner de códigos de barras.\r\n  async checkPermission() {\r\n    try {\r\n      // Verifica o solicita permiso para usar el escáner de códigos de barras.\r\n      // check or request permission\r\n      const status = await BarcodeScanner.checkPermission({ force: true });\r\n      if (status.granted) {\r\n        // the user granted permission\r\n        return true;\r\n      }\r\n      // El usuario no ha otorgado permiso.\r\n      return false;\r\n    } catch(e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n// Esta función inicia el escaneo de códigos de barras.\r\n  async startScan() {\r\n    try {\r\n      // Verifica si se tiene permiso para escanear códigos de barras.\r\n      const permission = await this.checkPermission();\r\n      if(!permission) {\r\n        return;\r\n      }\r\n      // Oculta el fondo de la aplicación y ajusta la interfaz para el escaneo.\r\n      await BarcodeScanner.hideBackground();\r\n      document.querySelector('body').classList.add('scanner-active');\r\n      this.content_visibility = 'hidden';\r\n\r\n      // Inicia el escáner de códigos de barras y maneja el resultado.\r\n      const result = await BarcodeScanner.startScan();\r\n      console.log(result);\r\n      BarcodeScanner.showBackground();\r\n      document.querySelector('body').classList.remove('scanner-active');\r\n      this.content_visibility = '';\r\n      if(result?.hasContent) {\r\n        this.scannedResult = result.content;\r\n        console.log(this.scannedResult);\r\n      }\r\n    } catch(e) {\r\n      console.log(e);\r\n      this.stopScan();\r\n    }\r\n  }\r\n\r\n  // Esta función detiene el escaneo de códigos de barras y restaura la interfaz.\r\n  stopScan() {\r\n    BarcodeScanner.showBackground();\r\n    BarcodeScanner.stopScan();\r\n    document.querySelector('body').classList.remove('scanner-active');\r\n    this.content_visibility = '';\r\n  }\r\n\r\n// Esta función se ejecuta cuando se destruye el componente y asegura que se detenga el escaneo.\r\n  ngOnDestroy(): void {\r\n    this.stopScan();\r\n}\r\n\r\n\r\n}\r\n"],"names":["Component","BarcodeScanner","ScanQrPagoPage","constructor","checkPermission","status","force","granted","e","console","log","startScan","permission","hideBackground","document","querySelector","classList","add","content_visibility","result","showBackground","remove","hasContent","scannedResult","content","stopScan","ngOnDestroy","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}