{"version":3,"file":"src_app_vistas_restaurantes_restaurantes_module_ts.js","mappings":"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","sources":["./src/app/vistas/restaurantes/restaurantes-routing.module.ts","./src/app/vistas/restaurantes/restaurantes.module.ts","./src/app/vistas/restaurantes/restaurantes.page.ts","./node_modules/uuid/dist/esm-browser/bytesToUuid.js","./node_modules/uuid/dist/esm-browser/rng.js","./node_modules/uuid/dist/esm-browser/v4.js"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RestaurantesPage } from './restaurantes.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RestaurantesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RestaurantesPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RestaurantesPageRoutingModule } from './restaurantes-routing.module';\r\n\r\nimport { RestaurantesPage } from './restaurantes.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RestaurantesPageRoutingModule\r\n  ],\r\n  declarations: [RestaurantesPage]\r\n})\r\nexport class RestaurantesPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\r\nimport { AngularFireDatabase } from '@angular/fire/compat/database';\r\nimport { v4 as uuidv4 } from 'uuid'; // Importa uuidv4\r\nimport { LoadingController } from '@ionic/angular';\r\nimport * as Notiflix from 'notiflix';\r\n\r\n\r\n@Component({\r\n  selector: 'app-restaurantes',\r\n  templateUrl: './restaurantes.page.html',\r\n  styleUrls: ['./restaurantes.page.scss'],\r\n})\r\nexport class RestaurantesPage implements OnInit {\r\n  restaurantes: any[];\r\n  menuRestaurante: any[];\r\n  restaurantesFiltrados: any[] = [];\r\n  restauranteSeleccionado: any;\r\n  precioMenu: any;\r\n  isModalOpen: boolean;\r\n  uid: string;\r\n\r\n  constructor(private db: AngularFireDatabase, private afAuth: AngularFireAuth, private loadingController: LoadingController) {\r\n\r\n  }\r\n\r\n  //Función para generar un nuevo pedidoID\r\n  generarPedidoID(): string {\r\n    return uuidv4();\r\n  }\r\n\r\n  //agrega el pedido al carrito junto con sus id\r\n  agregarAlCarrito(usuarioID: string, plato: any, restaurante: string) {\r\n    const pedidoID = this.generarPedidoID();\r\n      \r\n    // Crear un objeto con los detalles del plato\r\n    const pedido = {\r\n      platoID: plato.id,\r\n      nombre: plato.nombre,\r\n      imagen: plato.img,\r\n      precio: plato.precio,\r\n      restaurante: restaurante\r\n    };\r\n  \r\n    const carritoItemRef = this.db.object(`CarritoPedidos/${usuarioID}/${pedidoID}`);\r\n    carritoItemRef.update({ Pedido: pedido }); // Modifica para que se almacene bajo \"Pedido\"\r\n    \r\n    console.log('ID del pedido:', pedidoID, 'Pedido:', pedido,'user: ', usuarioID);\r\n    Notiflix.Notify.success('Agregado al carrito');\r\n  }\r\n  \r\n\r\n\r\n\r\n  //obtiene el menu del restaurante seleccionado\r\n  async getMenuRestaurante(restauranteId: number) {\r\n    const restaurante = await this.restaurantes.find(rest => rest.id === restauranteId);\r\n    \r\n    if (restaurante) {\r\n      this.restauranteSeleccionado = restaurante.nombre;\r\n      this.menuRestaurante = restaurante.menu;\r\n      this.precioMenu = restaurante.precio;\r\n      this.isModalOpen = true; \r\n    }\r\n\r\n  }\r\n  \r\n\r\n  setOpen(isOpen: boolean) {\r\n    this.isModalOpen = isOpen;\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n    const loading = await this.loadingController.create({\r\n      message: 'Cargando restaurantes...', // Mensaje que se mostrará\r\n      duration: 1000 // Duración en milisegundos (ajusta según tus necesidades)\r\n    });\r\n    \r\n    await loading.present();\r\n    \r\n    //Carga los elementos a listar\r\n    this.db.list('restaurantes').valueChanges().subscribe((data: any[]) => { //Busca la data y las guarda en this.restaurantes\r\n      this.restaurantes = data;\r\n    });\r\n\r\n    this.afAuth.authState.subscribe((user) => {\r\n      if (user) {\r\n        this.uid = user.uid;\r\n        console.log('uid usuario:', this.uid);\r\n      }\r\n    });\r\n  }\r\n\r\n  getItems(event: any) {\r\n    const terminoBusqueda = event.target.value.toLowerCase(); // Convertir a minúsculas directamente aquí\r\n  \r\n    if (terminoBusqueda && terminoBusqueda.trim() !== '') {\r\n      this.restaurantesFiltrados = this.restaurantes.filter(restaurante =>\r\n        restaurante.nombre && restaurante.nombre.toLowerCase().includes(terminoBusqueda)\r\n      );\r\n    } else {\r\n      this.restaurantesFiltrados = [...this.restaurantes];\r\n    }\r\n  }\r\n  \r\n  \r\n  ngOnInit() {}\r\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;"],"names":["Component","AngularFireAuth","AngularFireDatabase","v4","uuidv4","LoadingController","Notiflix","RestaurantesPage","constructor","db","afAuth","loadingController","generarPedidoID","agregarAlCarrito","usuarioID","plato","restaurante","pedidoID","pedido","platoID","id","nombre","imagen","img","precio","carritoItemRef","object","update","Pedido","console","log","Notify","success","getMenuRestaurante","restauranteId","restaurantes","find","rest","restauranteSeleccionado","menuRestaurante","menu","precioMenu","isModalOpen","setOpen","isOpen","ionViewWillEnter","loading","create","message","duration","present","list","valueChanges","subscribe","data","authState","user","uid","getItems","event","terminoBusqueda","target","value","toLowerCase","trim","restaurantesFiltrados","filter","includes","ngOnInit","selector","template","byteToHex","i","toString","substr","bytesToUuid","buf","offset","bth","join","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","rng","Error","options","Array","rnds","random","ii"],"sourceRoot":"webpack:///","x_google_ignoreList":[3,4,5]}